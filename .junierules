# Junie's Operational Rules for The Expat Ledger

## 1. Scope Control
- **NO unauthorized scope changes**: Junie MUST NOT change the project's core purpose, tech stack, or architectural style without an explicit `<issue_update>` from the user.
- **ADR-First**: Any significant architectural or technical change must be documented in a new ADR under `docs/architecture/decisions/` before implementation.
- **Blueprint Compliance**: All development must align with the "Master Blueprint: The Expat Ledger".

## 2. Tech Stack Consistency
- **Language**: Scala 3 (using Scala-native features where possible: enums, opaque types, etc.).
- **Backend**: Pure Scala-native frameworks (e.g., Cats Effect, Http4s, Doobie). Discard Spring Boot to avoid interoperability issues.
- **API**: Protobuf/gRPC for internal sync, CloudEvents 1.0 for async.
- **Build**: sbt (Scala Build Tool).

## 3. Documentation & Backlog
- **Backlog-as-Code**: Always update the JSON status in `docs/backlog/iteration-N.json` and run `python3 scripts/backlog_render.py` after completing a task.
- **Changelogs**: Maintain `docs/governance/scope-CHANGELOG.md` for scope changes and `docs/contracts/CHANGELOG.md` for API changes.
- **Traceability**: Every PR/Change should reference the functional requirement (e.g., FR-1) it addresses.

## 4. Quality Standards
- **Test Coverage**: 100% coverage for domain logic.
- **Naming**: Follow Scala 3 naming conventions (camelCase).
- **Security**: Always consider tenant isolation and JWT scoping.

## 5. Deployment
- **Docker-First**: Ensure all services are containerizable and work within the `docker-compose.app.yml` stack.
